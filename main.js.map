{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_praktikum/./src/components/api.js","webpack://yandex_praktikum/./src/components/card.js","webpack://yandex_praktikum/./src/components/modal.js","webpack://yandex_praktikum/./src/components/validation.js","webpack://yandex_praktikum/./src/components/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-19',\r\n  headers: {\r\n    authorization: 'ff55c8a5-9e93-41a4-b092-8c36fdb087a0',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nfunction getResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\n\r\nexport const getInfoProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const editProfileInfo = ({name, about}) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const addNewCard = (newCard) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: newCard.name,\r\n      link: newCard.link\r\n    }),\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const getLikesCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId.id}`, {\r\n    method: 'PUT',\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const deleteUserCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId.id}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const deleteLikeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId.id}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const updateAvatarUser = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar,\r\n    }),\r\n  })\r\n    .then(getResponse);\r\n};\r\n","import { getLikesCard, deleteLikeCard } from './api.js';\r\n\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\n\r\n\r\nfunction createCard(cardData, userId, openPopupImage, deleteCard, addLikeCard) {\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const cardTitle = cardElement.querySelector('.card__title');\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  const cardLikeValue = cardElement.querySelector('.card__like-value');\r\n  const cardId = cardData._id;\r\n  \r\n  cardElement.dataset.cardId = cardData._id;\r\n  cardTitle.textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  cardLikeValue.textContent = cardData.likes.length;\r\n  \r\n\r\n  if (cardData.likes.some((like) => like._id === userId)) {\r\n    cardLikeButton.classList.add('card__like-button_is-active');\r\n  };\r\n\r\n\r\n  if (cardData.owner._id === userId) {\r\n    deleteButton.classList.add('card__delete-button_active')\r\n    deleteButton.addEventListener(\"click\", function (evt) {\r\n      const card = evt.target.closest('.card');\r\n      deleteCard(card);\r\n    }); \r\n  } else {\r\n    deleteButton.remove();\r\n  };\r\n  \r\n\r\n  cardLikeButton.addEventListener('click', (evt) =>  addLikeCard(evt, cardId, cardLikeValue));\r\n\r\n\r\n  cardImage.addEventListener(\"click\", () => {\r\n    openPopupImage(cardImage.src, cardImage.alt, cardTitle.textContent);\r\n  });\r\n\r\n\r\n  return cardElement;\r\n};\r\n\r\n\r\nfunction deleteCard(card) {\r\n  card.remove();\r\n};\r\n\r\n\r\nfunction addLikeCard (evt, cardId, cardLikeValue) {\r\n  const like = evt.target.classList.contains(\"card__like-button_is-active\") ? deleteLikeCard : getLikesCard;\r\n  like(cardId) \r\n    .then((cardData) => {\r\n      cardLikeValue.textContent = cardData.likes.length; \r\n      evt.target.classList.toggle(\"card__like-button_is-active\");\r\n    })\r\n    .catch((error) => {\r\n      console.log(error)\r\n    });\r\n  };\r\n\r\n\r\nexport { createCard, deleteCard, addLikeCard };\r\n","export function openModal(popup) {\r\n  popup.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', closeModalEsc);\r\n  popup.addEventListener('mousedown', overlayClickModal);\r\n};\r\n\r\n\r\nexport function closeModal(popup) {\r\n  popup.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', closeModalEsc);\r\n  popup.removeEventListener('mousedown', overlayClickModal);\r\n};\r\n\r\n\r\nfunction closeModalEsc(evt) {\r\n  if (evt.key === 'Escape') {\r\n    const popupToClose = document.querySelector('.popup_is-opened');\r\n    closeModal(popupToClose);\r\n  };\r\n};\r\n\r\n\r\nfunction overlayClickModal(evt) {\r\n  if (evt.target.classList.contains('popup_is-opened')) {\r\n    closeModal(evt.target);\r\n  };\r\n};\r\n","const showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = '';\r\n};\r\n\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if(inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      \r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}; \r\n\r\n\r\nexport const enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\n\r\nexport const clearValidation = (formElement, validationConfig) => {\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  });\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n};\r\n\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n  }\r\n};\r\n","import '../pages/index.css';\r\nimport { createCard, deleteCard, addLikeCard } from './card.js';\r\nimport { openModal, closeModal } from './modal.js';\r\nimport { enableValidation, clearValidation } from './validation.js';\r\nimport { getInfoProfile, getInitialCards, editProfileInfo, addNewCard, updateAvatarUser, deleteUserCard } from './api.js';\r\n\r\n\r\nconst cardsContainer = document.querySelector('.places__list');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst addButton = document.querySelector('.profile__add-button');\r\n\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\nconst popupAvatar = document.querySelector('.popup_type_avatar');\r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\nconst popupCloseButtons = document.querySelectorAll('.popup__close');\r\n\r\nconst formProfile = popupEdit.querySelector('.popup__form');\r\nconst nameInput = formProfile.querySelector('.popup__input_type_name');\r\nconst jobInput = formProfile.querySelector('.popup__input_type_description');\r\n\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDscription = document.querySelector('.profile__description');\r\n\r\nconst popupImages = document.querySelector('.popup_type_image');\r\nconst popupImageLink = popupImages.querySelector('.popup__image');\r\nconst popupImageName = popupImages.querySelector('.popup__caption');\r\n\r\nconst newCard = document.forms['new-place'];\r\nconst imageName = newCard['place-name'];\r\nconst imageLink = newCard.link;\r\n\r\nconst profileAvatar = document.querySelector('.profile__image');\r\nconst formAvatar = popupAvatar.querySelector('.popup__form');\r\nconst inputAvaUrl = formAvatar.querySelector('.popup__input_type_url');\r\n\r\nconst popupDeleteCard = document.querySelector('.popup_type_delete-image');\r\nconst formDelete = popupDeleteCard.querySelector('.popup__form');\r\n//const popupDeleteCardButton = popupDeleteCard.querySelector('.popup__button');\r\n\r\nlet submitButton = null;\r\nlet cardToDelete = '';\r\n\r\n\r\n// Открытие модального окна подтверждения удаления\r\nfunction deleteCardPopup(card) {\r\n  cardToDelete = card;\r\n  openModal(popupDeleteCard);\r\n}\r\n\r\n// Удаление карточки после подтверждения \r\nfunction processDeleteCardSubmit(evt){\r\n  evt.preventDefault();\r\n\r\n  deleteUserCard(cardToDelete)\r\n    .then(() => {\r\n      deleteCard(cardToDelete)\r\n      closeModal(popupDeleteCard);\r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n    });\r\n};\r\n\r\n\r\n// Слушатель события формы подтверждения удаления\r\nformDelete.addEventListener(\"submit\", processDeleteCardSubmit);\r\n\r\n\r\nconst  validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\n\r\n// загрузка данных\r\nfunction renderLoading(isLoading, button) {\r\n  if (isLoading) {\r\n    button.textContent = \"Сохранение...\";\r\n  } else {\r\n    button.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\n\r\n// открытие модального окна картинки\r\nfunction openPopupImage(imageURL, imageAlt, title) {\r\n    popupImageLink.src = imageURL;\r\n    popupImageLink.alt = imageAlt;\r\n    popupImageName.textContent = title;\r\n    openModal(popupImages);\r\n};\r\n\r\n\r\n// открытие модального окна редактирования профиля (карандаш)\r\nprofileEditButton.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  openModal(popupEdit);\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDscription.textContent;\r\n  clearValidation(popupEdit, validationConfig);\r\n});\r\n\r\n\r\n// редактирование данных профиля в модальном окне\r\nfunction processProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  submitButton = formProfile.querySelector('.popup__button');\r\n  renderLoading(true, submitButton);\r\n\r\n  editProfileInfo({\r\n    name: nameInput.value,\r\n    about: jobInput.value,\r\n  })\r\n    .then((res) => {\r\n      profileTitle.textContent = res.name;\r\n      profileDscription.textContent = res.about;\r\n\r\n      closeModal(popupEdit);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading(false, submitButton);\r\n    })\r\n};\r\n\r\n\r\n// сохранение отредактированных данных в профиле\r\nformProfile.addEventListener('submit', processProfileSubmit);\r\n\r\n\r\n// модальное окно изменения аватара\r\nprofileAvatar.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  openModal(popupAvatar);\r\n  clearValidation(popupAvatar, validationConfig);\r\n});\r\n\r\n\r\n// установка аватара в модальном окне\r\nfunction processAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  submitButton = formAvatar.querySelector('.popup__button');\r\n  renderLoading(true, submitButton);\r\n  \r\n  updateAvatarUser(inputAvaUrl.value)\r\n    .then((res) => {\r\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`\r\n\r\n      closeModal(popupAvatar)\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading(false, submitButton);\r\n    })\r\n};\r\n\r\n\r\nformAvatar.addEventListener('submit', processAvatarSubmit);\r\n\r\n\r\n// открытие модального окна добавления картинки (+)\r\naddButton.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  openModal(popupNewCard);\r\n  clearValidation(popupNewCard, validationConfig);\r\n});\r\n\r\n\r\n// получаем новую картинку в список картинок\r\n function processNewCardSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  submitButton = newCard.querySelector('.popup__button');\r\n  const newCardObject = {\r\n    name: imageName.value,\r\n    link: imageLink.value,\r\n  }\r\n\r\n  renderLoading(true, submitButton);\r\n\r\n  addNewCard(newCardObject)\r\n    .then((res) => {\r\n      cardsContainer.prepend(createCard(\r\n        res, \r\n        res.owner._id, \r\n        openPopupImage,\r\n        deleteCardPopup,\r\n        addLikeCard,\r\n      ));\r\n      \r\n      closeModal(popupNewCard);\r\n      newCard.reset();\r\n    })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  })\r\n  .finally(() => {\r\n    renderLoading(false, submitButton);\r\n  })\r\n};\r\n\r\n\r\nnewCard.addEventListener('submit', processNewCardSubmit);\r\n\r\n\r\n// закрытие модальных окон (All)\r\npopupCloseButtons.forEach((item) => {\r\n  item.addEventListener('click', () => {\r\n    const popupToClose = item.closest('.popup');\r\n    closeModal(popupToClose);\r\n  });\r\n});\r\n\r\n\r\nPromise.all([getInfoProfile(), getInitialCards()])\r\n  .then(([user, newCard]) => {\r\n    profileTitle.textContent = user.name;\r\n    profileDscription.textContent = user.about;\r\n    profileAvatar.style.backgroundImage = `url(${user.avatar})`;\r\n    newCard.forEach((cardData) => {\r\n      cardsContainer.append(\r\n        createCard(cardData, user._id, openPopupImage, deleteCardPopup, addLikeCard));\r\n      });\r\n  })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  });\r\n\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["config","baseUrl","headers","authorization","getResponse","res","ok","json","Promise","reject","concat","status","getLikesCard","cardId","fetch","id","method","then","deleteLikeCard","cardTemplate","document","querySelector","content","createCard","cardData","userId","openPopupImage","deleteCard","addLikeCard","cardElement","cloneNode","cardImage","cardTitle","deleteButton","cardLikeButton","cardLikeValue","_id","dataset","textContent","name","src","link","alt","likes","length","some","like","classList","add","owner","addEventListener","evt","card","target","closest","remove","contains","toggle","catch","error","console","log","openModal","popup","closeModalEsc","overlayClickModal","closeModal","removeEventListener","key","hideInputError","formElement","inputElement","validationConfig","errorElement","inputErrorClass","errorClass","clearValidation","buttonElement","submitButtonSelector","inputList","Array","from","querySelectorAll","inputSelector","forEach","toggleButtonState","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","cardsContainer","profileEditButton","addButton","popupEdit","popupAvatar","popupNewCard","popupCloseButtons","formProfile","nameInput","jobInput","profileTitle","profileDscription","popupImages","popupImageLink","popupImageName","newCard","forms","imageName","imageLink","profileAvatar","formAvatar","inputAvaUrl","popupDeleteCard","formDelete","submitButton","cardToDelete","deleteCardPopup","preventDefault","formSelector","renderLoading","isLoading","button","imageURL","imageAlt","title","value","_ref","about","body","JSON","stringify","finally","avatar","style","backgroundImage","newCardObject","addNewCard","prepend","reset","item","all","_ref2","user","append","patternMismatch","setCustomValidity","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}
{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_praktikum/./src/components/api.js","webpack://yandex_praktikum/./src/components/card.js","webpack://yandex_praktikum/./src/components/modal.js","webpack://yandex_praktikum/./src/components/validation.js","webpack://yandex_praktikum/./src/components/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-19',\r\n  headers: {\r\n    authorization: 'ff55c8a5-9e93-41a4-b092-8c36fdb087a0',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nfunction getResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\n\r\nexport const getInfoProfile = () => {\r\n  return fetch(baseUrl + 'users/me', {\r\n    headers: {\r\n      authorization: token\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(baseUrl + 'cards', {\r\n    headers: {\r\n      authorization: token\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const editProfileInfo = ({name, about}) => {\r\n  return fetch(baseUrl + 'users/me', {\r\n    method: 'PATCH',\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json; charset=UTF-8'\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const addNewCard = (cardData) => {\r\n  return fetch(baseUrl + 'cards', {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      name: cardData.name,\r\n      link: cardData.link,\r\n    }),\r\n    headers: {\r\n      authorization: token,\r\n      'Content-Type': 'application/json; charset=UTF-8'\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const getLikesCard = (cardId) => {\r\n  return fetch(\r\n    baseUrl + 'cards/like/' + cardId, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: token\r\n      }\r\n    })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const deleteUserCard = (cardId) => {\r\n  return fetch(baseUrl + 'cards/' + cardId, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      authorization: token\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const deleteLikeCard = (cardId) => {\r\n  return fetch(\r\n    baseUrl + 'cards/like/' + cardId, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: token\r\n      }\r\n    })\r\n  .then((res) => {\r\n    return getResponse(res);\r\n  });\r\n};\r\n\r\n\r\nexport const updateAvatarUser = (avatar) => {\r\n  return fetch(baseUrl + 'users/me/avatar',\r\n    {\r\n      method: 'PATCH',\r\n      body: JSON.stringify({\r\n        avatar: avatar\r\n      }),\r\n      headers: {\r\n        authorization: token,\r\n        'Content-Type': 'application/json; charset=UTF-8'\r\n      }\r\n    })\r\n  .then((res) => {\r\n    getResponse(res);\r\n  });\r\n};\r\n","import { getLikesCard, deleteLikeCard } from './api.js';\r\n\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\n\r\n\r\nexport function createCard(cardData, userId, addLikeCard, openPopupImage) {\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const cardTitle = cardElement.querySelector('.card__title');\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  const cardLikeValue = cardElement.querySelector('.card__like-value');\r\n  \r\n  cardElement.id = cardData._id;\r\n  cardTitle.textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  \r\n\r\n  if (cardData.likes.length) {\r\n    cardLikeValue.textContent = cardData.likes.length;\r\n  };\r\n\r\n  if (cardData.likes.some((like) => like._id === userId)) {\r\n    cardLikeButton.classList.add(\"card__like-button_is-active\");\r\n  };\r\n\r\n\r\n  if (cardData.owner._id === userId) {\r\n    deleteButton.classList.add('card__delete-button_active')\r\n    deleteButton.addEventListener(\"click\", function (evt) {\r\n      const newCard = evt.target.closest('.card');\r\n      deleteCard(newCard);\r\n    }); \r\n  } else {\r\n    deleteButton.remove();\r\n  };\r\n  \r\n\r\n  cardLikeButton.addEventListener('click', (evt) =>  addLikeCard(evt, cardData._id));\r\n\r\n\r\n  cardImage.addEventListener('click', () => openPopupImage);\r\n\r\n\r\n  return cardElement;\r\n};\r\n\r\n\r\nexport function deleteCard(cardData) {\r\n  cardData.remove();\r\n}\r\n\r\n\r\nexport function addLikeCard(cardData, cardId) {\r\n  const cardLikeButton = cardData.closest('.card__description');\r\n  const cardLikeValue = cardLikeButton.querySelector('.card__like-value');\r\n\r\n  if(cardData.classList.contains('card__like-button_is-active')){\r\n    deleteLikeCard(cardId, \"DELETE\")\r\n      .then(res => {\r\n        cardLikeValue.textContent = res.likes.length;\r\n        cardData.classList.toggle('card__like-button_is-active');\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  } else {\r\n    getLikesCard(cardId, \"PUT\")\r\n      .then(res => {\r\n        cardLikeValue.textContent = res.likes.length;\r\n        cardData.classList.toggle('card__like-button_is-active');\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n};\r\n\r\n\r\nfunction checkLikeById(id, array) {\r\n  const idArray = array.map(cardData => cardData._id)\r\n  return idArray.includes(id)\r\n};\r\n","export function openModal(popup) {\r\n  popup.classList.add('popup_is-animated');\r\n  popup.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', closeModalEsc);\r\n  document.addEventListener('mousedown', overlayClickModal);\r\n};\r\n\r\n\r\nexport function closeModal(popup) {\r\n  popup.classList.add('popup_is-animated');\r\n  popup.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', closeModalEsc);\r\n  document.removeEventListener('mousedown', overlayClickModal);\r\n};\r\n\r\n\r\nfunction closeModalEsc(evt) {\r\n  if (evt.key === 'Escape') {\r\n    const popupToClose = document.querySelector('.popup_is-opened');\r\n    closeModal(popupToClose);\r\n  };\r\n};\r\n\r\n\r\nfunction overlayClickModal(evt) {\r\n  if (evt.target.classList.contains('popup_is-opened')) {\r\n    closeModal(evt.target);\r\n  };\r\n};\r\n","const showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = '';\r\n};\r\n\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if(inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      \r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}; \r\n\r\n\r\nexport const enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener('submit', function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\n\r\nexport const clearValidation = (formElement, validationConfig) => {\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector)\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector))\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig)\r\n  });\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig)\r\n};\r\n\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n  }\r\n};\r\n","import '../pages/index.css';\r\n//import { initialCards } from './cards.js';\r\nimport { createCard, deleteCard, addLikeCard } from './card.js';\r\nimport { openModal, closeModal } from './modal.js';\r\nimport { enableValidation, clearValidation } from './validation.js';\r\nimport { getInfoProfile, getInitialCards, editProfileInfo, addNewCard, deleteUserCard, updateAvatarUser } from './api.js';\r\n\r\n\r\nconst cardsContainer = document.querySelector('.places__list');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst addButton = document.querySelector('.profile__add-button');\r\n\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\nconst popupAvatar = document.querySelector('.popup_type_avatar');\r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\nconst popupCloseButtons = document.querySelectorAll('.popup__close');\r\n\r\nconst formProfile = popupEdit.querySelector('.popup__form');\r\nconst nameInput = formProfile.querySelector('.popup__input_type_name');\r\nconst jobInput = formProfile.querySelector('.popup__input_type_description');\r\n\r\nconst formCard = popupNewCard.querySelector('.popup__form');\r\nconst inputCardName = formCard.querySelector('.popup__input_type_card-name');\r\nconst inputCardUrl =  formCard.querySelector('.popup__input_type_url');\r\n\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDscription = document.querySelector('.profile__description');\r\n\r\nconst popupImages = document.querySelector('.popup_type_image');\r\nconst imageLink = popupImages.querySelector('.popup__image');\r\nconst imageName = popupImages.querySelector('.popup__caption');\r\n\r\nconst popupDeleteCard = document.querySelector('.popup_delete-image');\r\nconst popupDeleteCardButton = popupDeleteCard.querySelector('.popup__button');\r\n\r\nconst profileAvatar = document.querySelector('.profile__image');\r\nconst formAvatar = popupAvatar.querySelector('.popup__form');\r\nconst inputAvaUrl = formAvatar.querySelector('.popup__input_type_url');\r\n\r\n/*const userId = {\r\n  _id: '',\r\n};*/\r\n\r\nlet cardToDelete = null;\r\n\r\n\r\nconst  validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\n\r\n// загрузка данных\r\nfunction renderLoading(isLoading, form) {\r\n  const activeButton = form.querySelector('.popup__button');\r\n  activeButton.textContent = isLoading ? \"Сохранение...\" : \"Сохранить\";\r\n};\r\n\r\n\r\n// открытие модального окна картинки\r\nfunction openPopupImage(cardData) {\r\n  openModal(popupImages);\r\n  imageLink.src = cardData.target.src;\r\n  imageLink.alt = cardData.target.alt;\r\n  imageName.textContent = cardData.target.alt;\r\n};\r\n\r\ncardsContainer.addEventListener('click', openPopupImage);\r\n\r\n\r\n// открытие модального окна редактирования профиля (карандаш)\r\nprofileEditButton.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n  openModal(popupEdit);\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDscription.textContent;\r\n  clearValidation(popupEdit, validationConfig);\r\n});\r\n\r\n\r\n// редактирование данных профиля в модальном окне\r\nfunction processProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading(true, formProfile);\r\n\r\n  editProfileInfo({\r\n    name: nameInput.value,\r\n    about: jobInput.value,\r\n  })\r\n    .then((res) => {\r\n      profileTitle.textContent = res.name;\r\n      profileDscription.textContent = res.about;\r\n\r\n      closeModal(popupEdit);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading(false, formProfile);\r\n    })\r\n};\r\n\r\n\r\n// сохранение отредактированных данных в профиле\r\nformProfile.addEventListener('submit', processProfileSubmit);\r\n\r\n\r\n// модальное окно изменения аватара\r\nprofileAvatar.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n  openModal(popupAvatar);\r\n  clearValidation(popupAvatar, validationConfig);\r\n});\r\n\r\n\r\n// установка аватара в модальном окне\r\nfunction processAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading(true, formAvatar);\r\n  \r\n  updateAvatarUser(inputAvaUrl.value)\r\n    .then((res) => {\r\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`\r\n\r\n      closeModal(popupAvatar)\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading(false, formAvatar);\r\n    })\r\n};\r\n\r\n\r\nformAvatar.addEventListener('submit', processAvatarSubmit);\r\n\r\n\r\n// открытие модального окна добавления картинки (+)\r\naddButton.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n  openModal(popupNewCard);\r\n  clearValidation(popupNewCard, validationConfig);\r\n});\r\n\r\n\r\n// получаем новую картинку в список картинок\r\n function processNewCardSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const newCard = {\r\n    name: inputCardName.value,\r\n    link: inputCardUrl.value,\r\n  }\r\n  renderLoading(true, formCard);\r\n\r\n  addNewCard(newCard)\r\n    .then((res) => {\r\n      cardsContainer.prepend(createCard(\r\n        res, \r\n        res.owner._id, \r\n        openPopupImage,\r\n        deleteCard,  \r\n        addLikeCard,\r\n      ));\r\n      \r\n      closeModal(popupNewCard);\r\n    })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  })\r\n  .finally(() => {\r\n    renderLoading(false, formCard);\r\n  })\r\n};\r\n\r\n\r\nformCard.addEventListener('submit', processNewCardSubmit);\r\n\r\n\r\nfunction openModalDeleteCard(cardData) {\r\n  openModal(popupDeleteCard);\r\n  cardToDelete = cardData;\r\n};\r\n\r\n\r\nfunction processDeleteCardClick(cardData, deleteModal) {\r\n  deleteUserCard(card.id)\r\n  .then(() => {\r\n    deleteCard(cardData);\r\n    closeModal(deleteModal);\r\n  })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  });\r\n};\r\n\r\n\r\npopupDeleteCardButton.addEventListener(\"click\", () => processDeleteCardClick(cardToDelete, popupDeleteCard));\r\n\r\n\r\n// закрытие модальных окон (All)\r\npopupCloseButtons.forEach((item) => {\r\n  item.addEventListener('click', () => {\r\n    const popupToClose = item.closest('.popup');\r\n    closeModal(popupToClose);\r\n  });\r\n});\r\n\r\n\r\nPromise.all([getInfoProfile(), getInitialCards()])\r\n  .then(([user, newCard]) => {\r\n    profileTitle.textContent = user.name;\r\n    profileDscription.textContent = user.about;\r\n    profileAvatar.style.backgroundImage = `url(${user.avatar})`;\r\n    newCard.forEach((cardData) => {\r\n      cardsContainer.append(\r\n        createCard(cardData, user._id, openPopupImage, deleteCard, addLikeCard));\r\n      });\r\n  })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  });\r\n\r\n\r\n  enableValidation(validationConfig);\r\n"],"names":["getResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","createCard","cardData","userId","addLikeCard","openPopupImage","cardElement","cloneNode","cardImage","cardTitle","deleteButton","cardLikeButton","cardLikeValue","id","_id","textContent","name","src","link","alt","likes","length","some","like","classList","add","owner","addEventListener","evt","deleteCard","target","closest","remove","openModal","popup","closeModalEsc","overlayClickModal","closeModal","removeEventListener","key","contains","hideInputError","formElement","inputElement","validationConfig","errorElement","inputErrorClass","errorClass","clearValidation","buttonElement","submitButtonSelector","inputList","Array","from","querySelectorAll","inputSelector","forEach","toggleButtonState","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","cardsContainer","profileEditButton","addButton","popupEdit","popupAvatar","popupNewCard","popupCloseButtons","formProfile","nameInput","jobInput","formCard","inputCardName","inputCardUrl","profileTitle","profileDscription","popupImages","imageLink","imageName","popupDeleteCard","popupDeleteCardButton","profileAvatar","formAvatar","inputAvaUrl","formSelector","renderLoading","isLoading","form","preventDefault","value","_ref","about","fetch","baseUrl","method","body","JSON","stringify","headers","authorization","token","then","catch","error","console","log","finally","avatar","style","backgroundImage","newCard","prepend","deleteModal","cardId","card","item","all","_ref2","user","append","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}
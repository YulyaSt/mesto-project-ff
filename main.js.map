{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_praktikum/webpack/bootstrap","webpack://yandex_praktikum/webpack/runtime/define property getters","webpack://yandex_praktikum/webpack/runtime/hasOwnProperty shorthand","webpack://yandex_praktikum/webpack/runtime/make namespace object","webpack://yandex_praktikum/./src/components/api.js","webpack://yandex_praktikum/./src/components/card.js","webpack://yandex_praktikum/./src/components/modal.js","webpack://yandex_praktikum/./src/components/validation.js","webpack://yandex_praktikum/./src/components/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-19',\r\n  headers: {\r\n    authorization: 'ff55c8a5-9e93-41a4-b092-8c36fdb087a0',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nfunction getResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\n\r\nexport const getInfoProfile = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const editProfileInfo = ({name, about}) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const addNewCard = (newCard) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: newCard.name,\r\n      link: newCard.link\r\n    }),\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const getLikesCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const deleteUserCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const deleteLikeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n    .then(getResponse);\r\n};\r\n\r\n\r\nexport const updateAvatarUser = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar,\r\n    }),\r\n  })\r\n    .then(getResponse);\r\n};\r\n","import { deleteUserCard, getLikesCard, deleteLikeCard } from './api.js';\r\n\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\nlet isLiked = null;\r\n\r\n\r\nexport function createCard(cardData, userId, openPopupImage, deleteCard, addLikeCard) {\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const cardTitle = cardElement.querySelector('.card__title');\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  const cardLikeValue = cardElement.querySelector('.card__like-value');\r\n  const cardId = cardData._id;\r\n  \r\n  cardElement.dataset.cardId = cardData._id;\r\n  cardTitle.textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  cardLikeValue.textContent = cardData.likes.length;\r\n  \r\n\r\n  if (cardData.likes.some((like) => like._id === userId)) {\r\n    cardLikeButton.classList.toggle(\"card__like-button_is-active\");\r\n    isLiked[cardId] = true;\r\n  };\r\n\r\n\r\n  if (cardData.owner._id === userId) {\r\n    deleteButton.classList.add('card__delete-button_active')\r\n    deleteButton.addEventListener(\"click\", function (evt) {\r\n      const newCard = evt.target.closest('.card');\r\n      deleteCard(newCard);\r\n    }); \r\n  } else {\r\n    deleteButton.remove();\r\n  };\r\n  \r\n\r\n  cardLikeButton.addEventListener('click', () =>  addLikeCard(cardId, cardLikeButton, cardLikeValue));\r\n\r\n\r\n  cardImage.addEventListener('click', () => openPopupImage);\r\n\r\n\r\n  return cardElement;\r\n};\r\n\r\n\r\nconst deleteCard = (cardElement) => {\r\n  deleteUserCard(cardElement.dataset.cardId)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\n\r\nconst addLikeCard = (cardId, cardLikeButton, cardLikeValue)=> {\r\n  const like = isLiked[cardId] ? deleteLikeCard : getLikesCard;\r\n    like(cardId)\r\n      .then((cardData) => { \r\n        cardLikeButton.classList.toggle('card__like-button_is-active'); \r\n        cardLikeValue.textContent = cardData.likes.length; \r\n        isLiked[cardId] = !isLiked[cardId]; \r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n};\r\n","export function openModal(popup) {\r\n  popup.classList.add('popup_is-animated');\r\n  popup.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', closeModalEsc);\r\n  document.addEventListener('mousedown', overlayClickModal);\r\n};\r\n\r\n\r\nexport function closeModal(popup) {\r\n  popup.classList.add('popup_is-animated');\r\n  popup.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', closeModalEsc);\r\n  document.removeEventListener('mousedown', overlayClickModal);\r\n};\r\n\r\n\r\nfunction closeModalEsc(evt) {\r\n  if (evt.key === 'Escape') {\r\n    const popupToClose = document.querySelector('.popup_is-opened');\r\n    closeModal(popupToClose);\r\n  };\r\n};\r\n\r\n\r\nfunction overlayClickModal(evt) {\r\n  if (evt.target.classList.contains('popup_is-opened')) {\r\n    closeModal(evt.target);\r\n  };\r\n};\r\n","const showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = '';\r\n};\r\n\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if(inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      \r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}; \r\n\r\n\r\nexport const enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener('submit', function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\n\r\nexport const clearValidation = (formElement, validationConfig) => {\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector)\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector))\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig)\r\n  });\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig)\r\n};\r\n\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n  }\r\n};\r\n","import '../pages/index.css';\r\n//import { initialCards } from './cards.js';\r\nimport { createCard, deleteCard, addLikeCard } from './card.js';\r\nimport { openModal, closeModal } from './modal.js';\r\nimport { enableValidation, clearValidation } from './validation.js';\r\nimport { getInfoProfile, getInitialCards, editProfileInfo, addNewCard, updateAvatarUser } from './api.js';\r\n\r\n\r\nconst cardsContainer = document.querySelector('.places__list');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst addButton = document.querySelector('.profile__add-button');\r\n\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\nconst popupAvatar = document.querySelector('.popup_type_avatar');\r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\nconst popupCloseButtons = document.querySelectorAll('.popup__close');\r\n\r\nconst formProfile = popupEdit.querySelector('.popup__form');\r\nconst nameInput = formProfile.querySelector('.popup__input_type_name');\r\nconst jobInput = formProfile.querySelector('.popup__input_type_description');\r\n\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDscription = document.querySelector('.profile__description');\r\n\r\nconst popupImages = document.querySelector('.popup_type_image');\r\nconst popupImageLink = popupImages.querySelector('.popup__image');\r\nconst popupImageName = popupImages.querySelector('.popup__caption');\r\n\r\nconst newCard = document.forms['new-place'];\r\nconst formCard = newCard.querySelector('.popup__button');\r\nconst imageName = newCard['place-name'];\r\nconst imageLink = newCard.link;\r\n\r\nconst popupDeleteCard = document.querySelector('.popup_delete-image');\r\nconst popupDeleteCardButton = popupDeleteCard.querySelector('.popup__button');\r\n\r\nconst profileAvatar = document.querySelector('.profile__image');\r\nconst formAvatar = popupAvatar.querySelector('.popup__form');\r\nconst inputAvaUrl = formAvatar.querySelector('.popup__input_type_url');\r\n\r\n/*const userId = {\r\n  _id: '',\r\n};*/\r\n\r\nlet cardToDelete = null;\r\n\r\n\r\nconst  validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\n\r\n// загрузка данных\r\nfunction renderLoading(isLoading, button) {\r\n  if (isLoading) {\r\n    button.textContent = \"Сохранение...\";\r\n  } else {\r\n    button.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\n\r\n// открытие модального окна картинки\r\nfunction openPopupImage(cardElement) {\r\n  if (cardElement.target.classList.contains(\"card__image\")) {\r\n    openModal(popupImages);\r\n    popupImageLink.src = cardElement.target.src;\r\n    popupImageLink.alt = cardElement.target.alt;\r\n    popupImageName.textContent = cardElement.target.alt;\r\n  }\r\n};\r\n\r\ncardsContainer.addEventListener('click', openPopupImage);\r\n\r\n\r\n// открытие модального окна редактирования профиля (карандаш)\r\nprofileEditButton.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  openModal(popupEdit);\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDscription.textContent;\r\n  clearValidation(popupEdit, validationConfig);\r\n});\r\n\r\n\r\n// редактирование данных профиля в модальном окне\r\nfunction processProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading(true, formProfile);\r\n\r\n  editProfileInfo({\r\n    name: nameInput.value,\r\n    about: jobInput.value,\r\n  })\r\n    .then((res) => {\r\n      profileTitle.textContent = res.name;\r\n      profileDscription.textContent = res.about;\r\n\r\n      closeModal(popupEdit);\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading(false, formProfile);\r\n    })\r\n};\r\n\r\n\r\n// сохранение отредактированных данных в профиле\r\nformProfile.addEventListener('submit', processProfileSubmit);\r\n\r\n\r\n// модальное окно изменения аватара\r\nprofileAvatar.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  openModal(popupAvatar);\r\n  clearValidation(popupAvatar, validationConfig);\r\n});\r\n\r\n\r\n// установка аватара в модальном окне\r\nfunction processAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  renderLoading(true, formAvatar);\r\n  \r\n  updateAvatarUser(inputAvaUrl.value)\r\n    .then((res) => {\r\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`\r\n\r\n      closeModal(popupAvatar)\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      renderLoading(false, formAvatar);\r\n    })\r\n};\r\n\r\n\r\nformAvatar.addEventListener('submit', processAvatarSubmit);\r\n\r\n\r\n// открытие модального окна добавления картинки (+)\r\naddButton.addEventListener('click', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  openModal(popupNewCard);\r\n  clearValidation(popupNewCard, validationConfig);\r\n});\r\n\r\n\r\n// получаем новую картинку в список картинок\r\n function processNewCardSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const newCardObject = {\r\n    name: imageName.value,\r\n    link: imageLink.value,\r\n  }\r\n  \r\n  renderLoading(true, formCard);\r\n\r\n  addNewCard(newCardObject)\r\n    .then((res) => {\r\n      cardsContainer.prepend(createCard(\r\n        res, \r\n        res.owner._id, \r\n        openPopupImage,\r\n        processDeleteCardClick,\r\n        addLikeCard,\r\n      ));\r\n      \r\n      closeModal(popupNewCard);\r\n      newCard.reset();\r\n    })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  })\r\n  .finally(() => {\r\n    renderLoading(false, formCard);\r\n  })\r\n};\r\n\r\n\r\nnewCard.addEventListener('submit', processNewCardSubmit);\r\n\r\n\r\nfunction processDeleteCardClick (cardElement) {\r\n  cardToDelete = cardElement;\r\n  openModal(popupDeleteCard);\r\n}\r\n\r\n\r\npopupDeleteCardButton.addEventListener(\"click\", () => {\r\n  deleteCard(cardToDelete);\r\n  closeModal(popupDeleteCard);\r\n});\r\n\r\n\r\n// закрытие модальных окон (All)\r\npopupCloseButtons.forEach((item) => {\r\n  item.addEventListener('click', () => {\r\n    const popupToClose = item.closest('.popup');\r\n    closeModal(popupToClose);\r\n  });\r\n});\r\n\r\n\r\nPromise.all([getInfoProfile(), getInitialCards()])\r\n  .then(([user, newCard]) => {\r\n    profileTitle.textContent = user.name;\r\n    profileDscription.textContent = user.about;\r\n    profileAvatar.style.backgroundImage = `url(${user.avatar})`;\r\n    newCard.forEach((cardData) => {\r\n      cardsContainer.append(\r\n        createCard(cardData, user._id, openPopupImage, processDeleteCardClick, addLikeCard));\r\n      });\r\n  })\r\n  .catch((error) => {\r\n    console.log(error);\r\n  });\r\n\r\n\r\n  enableValidation(validationConfig);\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","config","baseUrl","headers","authorization","getResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","isLiked","createCard","cardData","userId","openPopupImage","deleteCard","addLikeCard","cardElement","cloneNode","cardImage","cardTitle","deleteButton","cardLikeButton","cardLikeValue","cardId","_id","dataset","textContent","name","src","link","alt","likes","length","some","like","classList","toggle","owner","add","addEventListener","evt","newCard","target","closest","remove","openModal","popup","closeModalEsc","overlayClickModal","closeModal","removeEventListener","contains","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","errorClass","clearValidation","buttonElement","submitButtonSelector","inputList","Array","from","querySelectorAll","inputSelector","forEach","toggleButtonState","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","cardsContainer","profileEditButton","addButton","popupEdit","popupAvatar","popupNewCard","popupCloseButtons","formProfile","nameInput","jobInput","profileTitle","profileDscription","popupImages","popupImageLink","popupImageName","forms","formCard","imageName","imageLink","popupDeleteCard","popupDeleteCardButton","profileAvatar","formAvatar","inputAvaUrl","cardToDelete","formSelector","renderLoading","isLoading","button","processDeleteCardClick","preventDefault","_ref","about","fetch","method","body","JSON","stringify","then","catch","error","console","log","finally","avatar","style","backgroundImage","newCardObject","addNewCard","prepend","reset","item","all","_ref2","user","append","patternMismatch","setCustomValidity","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}